<!DOCTYPE html><!-- Last Published: Tue Apr 07 2020 14:06:30 GMT+0000 (Coordinated Universal Time) --><html data-wf-domain="canopy.cr" data-wf-page="5d7c233a2496db4725cd3c2d" data-wf-site="5d7c16dc5b749346cfa3d045"><head><meta charset="utf-8"/><title>Canopy | How we review code at Canopy</title><meta content="Over a year ago, we sat down at various Central Square establishments to talk about all the ways people screw up engineering culture and how we were going to get it right this time" name="description"/><meta content="Canopy | How we review code at Canopy" property="og:title"/><meta content="Over a year ago, we sat down at various Central Square establishments to talk about all the ways people screw up engineering culture and how we were going to get it right this time" property="og:description"/><meta content="" property="og:image"/><meta content="Canopy | How we review code at Canopy" property="twitter:title"/><meta content="Over a year ago, we sat down at various Central Square establishments to talk about all the ways people screw up engineering culture and how we were going to get it right this time" property="twitter:description"/><meta content="" property="twitter:image"/><meta property="og:type" content="website"/><meta content="summary_large_image" name="twitter:card"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="/assets/5d7c16dc5b749346cfa3d045/css/canopy-site.458bfae33.css" rel="stylesheet" type="text/css"/><script src="/assets/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script><script type="text/javascript">WebFont.load({  google: {    families: ["Source Sans Pro:200,200italic,300,300italic,regular,italic,600,600italic,700,700italic,900,900italic","Asul:regular,700"]  }});</script><!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif]--><script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script><link href="/assets/5d7c16dc5b749346cfa3d045/5d7e6a75a3db0835bd378164_favicon.png" rel="shortcut icon" type="image/x-icon"/><link href="/assets/img/webclip.png" rel="apple-touch-icon"/><link href="rss.xml" rel="alternate" title="RSS Feed" type="application/rss+xml"/>    <meta name="keywords" content="Canopy, Privacy, Personalization, Discovery" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://canopy.cr/" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@ourcanopy" />
    <meta name="twitter:creator" content="@ourcanopy" /></head><body><div data-collapse="small" data-animation="default" data-duration="400" data-no-scroll="1" role="banner" class="header w-nav"><div class="light-header-container w-container"><a href="../index.html" class="logo w-nav-brand"><img src="/assets/5d7c16dc5b749346cfa3d045/5e8c04574337f32da1adc9bb_logo-dark.svg" alt="" class="logo"/></a><nav role="navigation" class="header-links w-nav-menu"><a href="../index.html" class="header-link w-nav-link">Home</a><a href="../beta.html" class="header-link w-nav-link">TONIC</a><a href="..//about.html" class="header-link w-nav-link">About</a><a href="../blog.html" class="header-link w-nav-link">BLOG</a></nav><div class="light-menu-button w-nav-button"><img src="/assets/5d7c16dc5b749346cfa3d045/5e8c00ed0b5583091f2d383e_menu-dark.svg" alt=""/></div></div></div><div class="wrapper"><div class="blog-post"><div style="background-image:none" class="blog-image w-condition-invisible"></div><div class="blog-container"><a href="how-we-review-code-at-canopy.html" aria-current="page" class="blog-slug w-inline-block w--current"><h2 class="blog-title">How we review code at Canopy</h2></a><div class="blog-body w-richtext"><p>Over a year ago, we sat down at various Central Square establishments to talk about all the ways people screw up engineering culture and how we were going to get it right this time (this is now our official unofficial engineering motto). We talked and talked, we wrote it all down, and then we let that doc sit, because getting it right is not something you can do by fiat.</p><p>A year later we’re most proud of the way we review each other’s code. That probably sounds mundane but it’s a crucial first step in addressing how we work together as a team. Taking the time to read each other’s work and respectfully ask questions has set the tone for how we build things here. Having walked the walk, we deemed it safe to write down and share our review philosophy. It’s helped us a ton, and we hope you find it useful.</p><h4>Q: Why do we do code reviews?</h4><p>Lots of reasons!</p><ul role="list"><li>To let a reviewer learn about the change, so that more than one person knows about it.</li><li>To help both the coder and reviewer learn how to write better code - language features, design patterns, testing strategies, conventions, etc.</li><li>To help catch bugs or oversights.</li><li>To have a second person think about test coverage for the change, and suggest ways to improve it.</li><li>To identify confusing parts of the change that should be documented or refactored.</li></ul><p>Explicit non-reasons:</p><ul role="list"><li>To let the author and/or reviewer feel smart.</li><li>To let someone else catch/be on the hook for bugs you wrote.</li><li>To nitpick style.</li></ul><h4>Q: Should code reviews be supportive?</h4><p>We all know this is a gimme question, and the answer is a loud YES! Code reviews are not a time to look smart, or make another person feel bad about a mistake or oversight. Remember that there is a human on the other end of the code review, and they worked hard on whatever change you are looking at. In response, we work hard to be thorough, thoughtful, kind, and professional when reviewing our colleagues code.</p><p>So be nice, supportive, and encouraging in your comments. When making style suggestions, offer them as opinions, not facts. Don’t focus on style to the exclusion of understanding what the change does.</p><h4>Q: Wait, first you said no style nitpicks, then you talked about making style suggestions. Do style comments belong in code reviews, or not?</h4><p>There are style comments, then there are <em>style</em> comments. Style can be very important to readability and simplicity of code. Small things like a confusing name, or deviating from a convention can make new code confusing to read.</p><p>If you, as a reviewer, are confused by something in a PR - even if you can figure it out yourself by poking around in the change - you should feel totally comfortable making suggestions to improve readability. Chances are, someone else reading the code later will have the same confusion. These suggestions might include asking for more comments, asking for variable renames, or suggesting alternative factorings or simplifications.</p><p>As an author, you might find yourself thinking “that’s silly, it’s obvious,” or “I like my way better.” You’re probably even right sometimes, and should push back on the comment if you feel strongly. But, keep in mind that code is read many more times than it is written, and you should give your reviewer’s opinion extra weight because it represents the majority who will read the code but did not write it.</p><p>On the other hand, as a reviewer, if an author writes code in a style that is not your favorite, but it doesn’t noticeably impact the readability of the code, then you can just grumble to yourself and move on with the rest of the review.</p><h4>Q: Can a reviewer suggest big changes?</h4><p>Yes! Up to and including “I don’t think we should make this change.” However, suggestions for big changes should happen as conversations, rather than statements of fact.</p><p>For example, “I have this idea for a big change that I think would make this better, let me explain…how does that sound? Do you think it makes sense to do that now, or later?” is better than “Here is a better way to do it: …, let me know when it’s ready to look at again.”</p><p>The timing of those big changes should also be a discussion. See the next question...</p><h4>Q: Are code reviews a gate?</h4><p>Yes and no. Every change to master should be code reviewed. Beyond that, it is the responsibility of the author and reviewer to agree on what feedback needs to be addressed before the PR is merged.</p><p>As a reviewer, it’s helpful to be explicit about what changes you think should be addressed before the PR goes in, as an immediate follow on, or some time in the future.</p><p>As an author, if you are inclined to skip or defer a piece of feedback, it’s expected that you’ll reply to the feedback with a reason for deferring or skipping it.</p><h4>Q: I’m reviewing a change that is blocking a release or some other time sensitive thing, what should I change?</h4><p>You should give the change the same level of scrutiny, and leave the same comments you would otherwise. However, you may want to be more flexible in terms of which pieces of feedback you consider to be blocking vs. which can be addressed in a follow on PR. For example, you might explicitly note that style can be addressed in a follow on PR so that the functionality can land sooner.</p><p>A looming deadline is never an excuse to ignore quality, readability, or test coverage. It may be an excuse to defer addressing some of it in a particular PR though.</p><h4>Q: When should I request a review?</h4><p>For larger changes, getting an initial review early is often really helpful - if the reviewer suggests big structural changes, making them before polishing the rest of the change can save a ton of time. On the other hand, reviews do take time, so you don’t want to ask for one every time you push a single commit.</p><p>If you do ask for an early review, make your expectations and the state of the change clear to the reviewer. For example, saying “I don’t have tests yet, and I need to do a naming pass, but can you take a look at the class factoring I have here?” can save the reviewer a lot of time.</p><h4>Q: What if something is really trivial - does it need a review?</h4><p>Then it should be quick to code review! Even a PR that fixes a comment can teach the reviewer something.</p><h4>Q: What if something is on fire and I can’t wait for a review?</h4><p>We’re all adults, use your judgement! If you do have to submit something without a review, get a post-submit review as soon as you can.</p></div><div class="w-row"><div class="w-col w-col-6 w-col-tiny-6 w-col-small-6"><h5 class="heading-6">published by:</h5><div class="author-list"><div class="author"><div style="background-image:url(/assets/5d7c233ad0788cdb7cf67e2b/5d8100979593d056c596c544_team-joe.jpg&quot;)" class="img-small"></div><h6>Joe Delfino</h6></div><div class="author w-condition-invisible"><div style="background-image:none" class="img-small"></div><h6 class="w-dyn-bind-empty"></h6></div><div class="author w-condition-invisible"><div style="background-image:none" class="img-small"></div><h6 class="w-dyn-bind-empty"></h6></div></div></div><div class="w-col w-col-6 w-col-tiny-6 w-col-small-6"><h5>DAte:</h5><h6>May 1, 2019</h6></div></div></div></div></div><div class="footer-new"><div class="container footer-new"><div class="footer-grid"><div class="footer-column"><h6 class="h6">Canopy</h6><a href="../index.html" class="footer-p">Canopy</a><a href="../blog.html" class="footer-p">Blog</a><a href="../privacy-policy.html" class="footer-p">Privacy Policy</a><a href="..//terms.html" class="footer-p">Terms of Service</a></div><div class="footer-column"><h6 class="h6">Company</h6><a href="..//about.html#values" class="footer-p">Values</a><a href="..//about.html#team" class="footer-p">Team</a><a href="..//about.html#investors" class="footer-p">Investors</a></div><div class="footer-column"><h6 class="h6">Tonic</h6><a href="../beta.html" class="footer-p">About</a><a href="../beta.html#faq" class="footer-p">FAQs</a><a href="https://apps.apple.com/us/app/tonic-find-the-good/id1475936325" target="_blank" class="footer-p">App Store</a><a href="https://twitter.com/tonic_app" class="footer-p">Twitter</a></div><div class="footer-column"><h6 class="h6">Community</h6><a href="https://twitter.com/ourcanopy" target="_blank" class="footer-p">Twitter</a><a href="https://www.linkedin.com/company/canopycrestcorporation/" target="_blank" class="footer-p">LinkedIn</a></div><div class="footer-column mobile-hide"><h6 class="h6">Contact</h6><a href="mailto:support@canopy.cr" class="footer-p">Support</a><a href="mailto:press@canopy.cr" class="footer-p">Press</a></div></div><div class="footer-bottom"><div id="w-node-ffefbf22a389-bf22a349" class="footer-p copyright">© 2020 Canopy Crest Corporation</div></div></div></div><script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=5d7c16dc5b749346cfa3d045" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><script src="/assets/5d7c16dc5b749346cfa3d045/js/canopy-site.2ebb9646d.js" type="text/javascript"></script><!--[if lte IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif]--></body></html>

